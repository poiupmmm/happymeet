"use strict";(()=>{var e={};e.id=414,e.ids=[414],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90712:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>h,patchFetch:()=>P,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>g});var s={};r.r(s),r.d(s,{GET:()=>p});var n=r(95419),i=r(69108),o=r(99678),a=r(78070),u=r(3214);async function p(e,{params:t}){try{let{searchParams:r}=new URL(e.url),s="true"===r.get("upcoming"),n=parseInt(r.get("limit")||"5"),i=parseInt(r.get("page")||"1"),o=(i-1)*n;if(!await u._.group.findUnique({where:{id:t.id}}))return a.Z.json({message:"小组不存在"},{status:404});let p={groupId:t.id};s&&(p.startTime={gte:new Date});let[d,c]=await Promise.all([u._.event.findMany({where:p,include:{creator:{select:{id:!0,name:!0}},_count:{select:{members:!0}}},orderBy:{startTime:s?"asc":"desc"},skip:o,take:n}),u._.event.count({where:p})]);return a.Z.json({events:d,pagination:{total:c,pages:Math.ceil(c/n),page:i,limit:n}})}catch(e){return console.error("获取小组活动错误:",e),a.Z.json({message:"获取小组活动失败"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/groups/[id]/events/route",pathname:"/api/groups/[id]/events",filename:"route",bundlePath:"app/api/groups/[id]/events/route"},resolvedPagePath:"C:\\Users\\NK645TY\\OneDrive - EY CHINA\\桌面\\CURSOR\\happymeet\\app\\api\\groups\\[id]\\events\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m,headerHooks:v,staticGenerationBailout:g}=d,h="/api/groups/[id]/events/route";function P(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},3214:(e,t,r)=>{r.d(t,{_:()=>i});class s{constructor(){this.user=n("user"),this.group=n("group"),this.event=n("event"),this.comment=n("comment"),this.membership=n("membership"),this.eventParticipant=n("eventParticipant")}}function n(e){return{findUnique:()=>Promise.resolve(null),findMany:()=>Promise.resolve([]),create:()=>Promise.resolve({}),update:()=>Promise.resolve({}),delete:()=>Promise.resolve({}),count:()=>Promise.resolve(0)}}let i=new s}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206],()=>r(90712));module.exports=s})();