(()=>{var e={};e.id=688,e.ids=[688],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},32072:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var t=s(50482),n=s(69108),a=s(62563),i=s.n(a),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let d=["",{children:["(dashboard)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,89533)),"C:\\Users\\NK645TY\\OneDrive - EY CHINA\\桌面\\CURSOR\\happymeet\\app\\(dashboard)\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32436)),"C:\\Users\\NK645TY\\OneDrive - EY CHINA\\桌面\\CURSOR\\happymeet\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,78062)),"C:\\Users\\NK645TY\\OneDrive - EY CHINA\\桌面\\CURSOR\\happymeet\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\NK645TY\\OneDrive - EY CHINA\\桌面\\CURSOR\\happymeet\\app\\(dashboard)\\profile\\page.tsx"],m="/(dashboard)/profile/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(dashboard)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},70156:(e,r,s)=>{Promise.resolve().then(s.bind(s,44008))},41921:(e,r,s)=>{Promise.resolve().then(s.bind(s,94332))},3378:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},30554:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,61476,23))},44008:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var t=s(95344),n=s(3729),a=s(22254),i=s(47674),o=s(16212),l=s(92549);let d=["旅行","美食","运动","阅读","音乐","电影","艺术","科技","摄影","游戏","户外","健身","舞蹈","烹饪","语言","手工"];function c(){let{data:e,status:r,update:s}=(0,i.useSession)(),c=(0,a.useRouter)(),[m,x]=(0,n.useState)(!0),[u,h]=(0,n.useState)(!1),[p,f]=(0,n.useState)({type:"",text:""}),[b,g]=(0,n.useState)({name:"",bio:"",location:"",interests:[]});async function v(e){try{let r=await fetch(`/api/users/${e}`);if(r.ok){let e=await r.json();g({name:e.name||"",bio:e.bio||"",location:e.location||"",interests:e.interests||[]})}}catch(e){console.error("获取用户资料失败:",e)}finally{x(!1)}}(0,n.useEffect)(()=>{"unauthenticated"===r?c.push("/login"):"authenticated"===r&&e?.user?.id&&v(e.user.id)},[r,c,e?.user?.id]);let y=e=>{let{name:r,value:s}=e.target;g(e=>({...e,[r]:s}))},j=e=>{g(r=>{let s=[...r.interests];return s.includes(e)?{...r,interests:s.filter(r=>r!==e)}:{...r,interests:[...s,e]}})};async function N(r){r.preventDefault(),h(!0),f({type:"",text:""});try{let r=await fetch(`/api/users/${e?.user?.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(r.ok)f({type:"success",text:"个人资料已更新！"}),b.name!==e?.user?.name&&await s({name:b.name});else{let e=await r.json();f({type:"error",text:e.message||"更新失败，请稍后重试"})}}catch(e){console.error("更新用户资料失败:",e),f({type:"error",text:"更新失败，请稍后重试"})}finally{h(!1)}}return m?t.jsx("div",{className:"flex min-h-screen items-center justify-center",children:t.jsx("p",{className:"text-lg",children:"加载中..."})}):(0,t.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"个人资料"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"更新您的个人信息和兴趣爱好"})]}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[t.jsx("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"姓名"}),t.jsx(l.I,{id:"name",name:"name",type:"text",required:!0,value:b.name,onChange:y,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium",children:"个人简介"}),t.jsx("textarea",{id:"bio",name:"bio",rows:3,value:b.bio||"",onChange:y,className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"location",className:"block text-sm font-medium",children:"所在地"}),t.jsx(l.I,{id:"location",name:"location",type:"text",value:b.location||"",onChange:y,className:"mt-1"})]})]})}),(0,t.jsxs)("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[t.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"兴趣标签"}),t.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"选择您感兴趣的话题，这将帮助我们为您推荐相关小组和活动"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(e=>t.jsx("button",{type:"button",className:`rounded-full px-3 py-1 text-sm ${b.interests.includes(e)?"bg-primary text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,onClick:()=>j(e),children:e},e))})]}),p.text&&t.jsx("div",{className:`rounded-md p-4 ${"success"===p.type?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:p.text}),t.jsx("div",{className:"flex justify-end",children:t.jsx(o.z,{type:"submit",disabled:u,children:u?"保存中...":"保存资料"})})]})]})}},94332:(e,r,s)=>{"use strict";s.r(r),s.d(r,{Providers:()=>a});var t=s(95344),n=s(47674);function a({children:e}){return t.jsx(n.SessionProvider,{children:e})}},16212:(e,r,s)=>{"use strict";s.d(r,{z:()=>i});var t=s(95344),n=s(3729),a=s(91626);let i=(0,n.forwardRef)(({className:e,variant:r="default",size:s="default",...n},i)=>t.jsx("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===r,"border border-input bg-background hover:bg-accent hover:text-accent-foreground":"outline"===r,"hover:bg-accent hover:text-accent-foreground":"ghost"===r,"text-primary underline-offset-4 hover:underline":"link"===r,"h-10 px-4 py-2":"default"===s,"h-9 rounded-md px-3":"sm"===s,"h-11 rounded-md px-8":"lg"===s},e),ref:i,...n}));i.displayName="Button"},92549:(e,r,s)=>{"use strict";s.d(r,{I:()=>i});var t=s(95344),n=s(3729),a=s(91626);let i=n.forwardRef(({className:e,type:r,...s},n)=>t.jsx("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));i.displayName="Input"},91626:(e,r,s)=>{"use strict";s.d(r,{cn:()=>a});var t=s(56815),n=s(58423);function a(...e){return(0,n.m)((0,t.W)(e))}},32436:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d,dynamic:()=>o,runtime:()=>l});var t=s(25036),n=s(40646),a=s.n(n),i=s(44551);let o="force-dynamic",l="nodejs";function d({children:e}){let r=(0,i.usePathname)();return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("nav",{className:"bg-white shadow",children:[t.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex h-16 justify-between",children:[(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex flex-shrink-0 items-center",children:t.jsx("a",{href:"/",className:"text-2xl font-bold text-primary",children:"HappyMeet"})}),(0,t.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[t.jsx("a",{href:"/dashboard",className:"inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-primary text-gray-900",children:"仪表板"}),t.jsx("a",{href:"/groups",className:"inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700",children:"小组"}),t.jsx("a",{href:"/events",className:"inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700",children:"活动"}),t.jsx("a",{href:"/messages",className:"inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700",children:"消息"})]})]}),t.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:t.jsx("div",{className:"relative ml-3",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:"mr-4 text-sm text-gray-700",children:"用户"}),t.jsx("div",{className:"relative",children:(0,t.jsxs)("a",{href:"/profile",className:"flex rounded-full bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[t.jsx("span",{className:"sr-only",children:"用户菜单"}),t.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 text-center leading-8",children:"U"})]})})]})})}),t.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:(0,t.jsxs)("a",{href:"#",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary",children:[t.jsx("span",{className:"sr-only",children:"打开主菜单"}),t.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),(0,t.jsxs)("div",{className:"sm:hidden",children:[t.jsx("div",{className:"space-y-1 pb-3 pt-2",children:[{name:"仪表板",href:"/dashboard"},{name:"小组",href:"/groups"},{name:"活动",href:"/events"},{name:"消息",href:"/messages"}].map(e=>t.jsx(a(),{href:e.href,className:`block border-l-4 py-2 pl-3 pr-4 text-base font-medium ${r===e.href?"border-primary bg-primary-50 text-primary":"border-transparent text-gray-500 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-700"}`,children:e.name},e.name))}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pb-3 pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center px-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 text-center text-lg leading-10",children:"U"})}),(0,t.jsxs)("div",{className:"ml-3",children:[t.jsx("div",{className:"text-base font-medium text-gray-800",children:"用户"}),t.jsx("div",{className:"text-sm font-medium text-gray-500",children:"user@example.com"})]})]}),t.jsx("div",{className:"mt-3 space-y-1",children:[{name:"个人资料",href:"/profile"},{name:"设置",href:"/settings"}].map(e=>t.jsx(a(),{href:e.href,className:"block px-4 py-2 text-base font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-800",children:e.name},e.name))})]})]})]}),t.jsx("main",{className:"py-6",children:e})]})}},89533:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>a,__esModule:()=>n,default:()=>i});let t=(0,s(86843).createProxy)(String.raw`C:\Users\NK645TY\OneDrive - EY CHINA\桌面\CURSOR\happymeet\app\(dashboard)\profile\page.tsx`),{__esModule:n,$$typeof:a}=t,i=t.default},78062:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h,dynamic:()=>m,metadata:()=>u,runtime:()=>x});var t=s(25036),n=s(80265),a=s.n(n);s(67272);var i=s(86843);let o=(0,i.createProxy)(String.raw`C:\Users\NK645TY\OneDrive - EY CHINA\桌面\CURSOR\happymeet\app\providers.tsx`),{__esModule:l,$$typeof:d}=o;o.default;let c=(0,i.createProxy)(String.raw`C:\Users\NK645TY\OneDrive - EY CHINA\桌面\CURSOR\happymeet\app\providers.tsx#Providers`),m="force-dynamic",x="nodejs",u={title:"HappyMeet - 一起快乐相聚",description:"一个简单的社交活动组织平台",icons:{icon:"/favicon/favicon.ico"}};function h({children:e}){return t.jsx("html",{lang:"zh-CN",children:t.jsx("body",{className:a().className,children:t.jsx(c,{children:e})})})}},67272:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,194,855,714],()=>s(32072));module.exports=t})();